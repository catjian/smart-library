<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>智库联盟</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/findOrganizationByLetter.js"></script>
</head>
<body>
    <div class="index-logo">
        <img src="img/index-logo.jpg" width="100%">
        <div class="container">
            <div class="header-search">
                <ul>
                    <li><span class="login-bar right"><a href="http://47.104.8.66/home">登录</a><a href="register.html" style="display: none">注册</a></span></li>
                    <li>
                        <a class="btn-search border-radius5 right" onclick="searchByContentValue()">搜索</a>
                        <input type="text" class="input-230 border-radius5 right">
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="navbar">
        <div class="container">
                <ul>
                    <li><a href="index.html" >智库首页</a></li>
                    <li><a href="hotspots.html">决策热点</a></li>
                    <li><a href="notice.html">通知公告</a></li>
                    <li><a href="conference.html">会议集萃</a></li>
                    <li><a href="forum.html">智库论坛</a></li>
                    <li><a href="expert.html">智库专家</a></li>
                    <li><a href="union.html" class="current">智库联盟</a></li>
                    <li><a href="organization.html">智库机构</a></li>
                    <li><a href="achievements.html">智库成果</a></li>
                    <li><a href="database.html">智库数据库</a></li>
                </ul>
        </div>
    </div>
    <div class="listContent">
        <div class="leftMenu">
            <ul>
                <li><a href="##" class="current">智库联盟</a></li>
            </ul>
        </div>
        <div class="listRight">
            <div class="listNavbar">您当前位置：智库联盟</div>
            <div class="ach-search org-search expert-search">
                <label>联盟查询：</label>
                <input type="text" class="border-radius3 mr10" placeholder="" id="allianceSelectTextField" onchange="textFieldChangeInput()">
                <span class="border-radiusAll radio" id="expertName"></span>
                <label class="pr20">联盟名称</label>
                <input type="text" class="border-radius3 mr10" placeholder="" id="addressSelectTextField">
                <span class="border-radiusAll radio" id="research"></span>
                <label class="pr20">地域</label>
                <a class="selectParent mr10">
                    <select onchange="selectTitleChangeEvent(this.options[this.options.selectedIndex].value)">
                        <option value="0">大学</option>
                        <option value="1">政府</option>
                    </select>
                </a>
                <a href="##" class="submit border-radius5 relative" style="width:40px;height:30px;line-height:30px;top:1px;" id="submit-Search-btn">查询</a>
            </div>
            <div class="org-letter" >
                <span>全部</span>
                <a>A</a>
                <a>B</a>
                <a>C</a>
                <a>D</a>
                <a>E</a>
                <a>F</a>
                <a>G</a>
                <a>H</a>
                <a>I</a>
                <a>J</a>
                <a>K</a>
                <a>L</a>
                <a>M</a>
                <a>N</a>
                <a>O</a>
                <a>P</a>
                <a>Q</a>
                <a>R</a>
                <a>S</a>
                <a>T</a>
                <a>U</a>
                <a>V</a>
                <a>W</a>
                <a>X</a>
                <a>Y</a>
                <a>Z</a>
            </div>
            <div class="org-search-result">
                <ol id="line-spe-china">
                    <!--<li><span>A</span><a href="expert-details.html">安同良</a><a>安实</a><a>安同良</a></li>-->
                    <!--<li><span>B</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>C</span>-->
                        <!--<a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a>-->
                    <!--</li>-->
                    <!--<li><span>D</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>E</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>F</span>-->
                        <!--<a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a>-->
                    <!--</li>-->
                    <!--<li><span>G</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>H</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>I</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>J</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>K</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>L</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>M</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>N</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>O</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>P</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>Q</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>R</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>S</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>T</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>U</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>V</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>W</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>X</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>Y</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                    <!--<li><span>Z</span><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a><a>包思勤</a><a>卞建林</a><a>巴曙松</a><a>柏良泽</a></li>-->
                </ol>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="container relative">
            <img src="img/footer-icon-left.gif" alt="" class="footer-icon-left">
            <img src="img/footer-icon-right.gif" alt="" class="footer-icon-right">
            <ul>
                <li><a href="">关于我们</a></li>
                <li><a href="">联系我们</a></li>
                <li>400-8640-788</li>
                <li>客服邮件：dahuo@niub.la</li>
                <li>智库官网 版权所有 鄂ICP备14001631</li>
            </ul>
            <div class="ewm"><img src="img/ewm.gif">微信公众号</div>
        </div>
    </div>
</body>
<script>

    var organizationType = 0;
    $(function () {
        $('.org-letter span').click(function(){
            loadHtmlContent(null);
        })
        $('.org-letter a').click(function(){
            var txt = $(this).text();
            loadHtmlContent(txt);
        })
        $('#expertName').click(function () {
            if ($(this).children().length > 0) $(this).children().remove();
            else {
                $(this).append('<em class="border-radiusAll"></em>');
                $('#research').children().remove();
            }
        })
        $('#research').click(function () {
            if ($(this).children().length > 0) $(this).children().remove();
            else {
                $(this).append('<em class="border-radiusAll"></em>');
                $('#expertName').children().remove();
            }
        })
        $('#allianceSelectTextField').change(function () {
            if ($('#expertName').children().length > 0)
                $('#expertName').children().remove();
            else {
                $('#expertName').append('<em class="border-radiusAll"></em>');
                $('#research').children().remove();
            }
        })
        $('#addressSelectTextField').change(function () {
            if ($('#research').children().length > 0)
                $('#research').children().remove();
            else {
                $('#research').append('<em class="border-radiusAll"></em>');
                $('#expertName').children().remove();
            }
        })
        $('#submit-Search-btn').click(function () {
            var field, keyword;
            if ($('#expertName').children().length > 0) {
                field = "name";
                if ($('#allianceSelectTextField')[0].value.length > 0) {
                    keyword = $('#allianceSelectTextField')[0].value;
                }
            }
            if ($('#research').children().length > 0) {
                field = "territoryName";
                if ($('#addressSelectTextField')[0].value.length > 0) {
                    keyword = $('#addressSelectTextField')[0].value;
                }
            }
            findOrganizationByCondition(field,keyword,organizationType, function (result) {
                document.getElementById("line-spe-china").innerHTML = '';
                letterObject = result;
                var length = function () {
                    var count = 0;
                    for (var i in result) {
                        count++;
                    }
                    return count;
                };
                if (length() > 0) {
                    var content = '';
                    for (var i in result) {
                        var objArr = result[i];
                        if (objArr.length == 0) {
                            continue;
                        }
                        content += '<li><span>' + i + '</span>';
                        for (var j = 0; j < objArr.length; j++) {
                            var subObj = objArr[j];
                            content += '<a href="##' + subObj.id + '&' + i + '" onclick="organizationNameClickEvent(event, this,'+subObj.id+')">' + subObj.name + '</a>';
                        }
                        content += '</li>';
                    }
                    if (content.length > 0) {
                        document.getElementById("line-spe-china").innerHTML = content;
                    }
                }
            });
        })
    })

    function selectTitleChangeEvent(value) {
        organizationType = value;
    }

    function organizationNameClickEvent(event, objc, subid) {
        var text = objc.textContent;
        var urlMessage = window.location.hash;
        urlMessage = urlMessage.substring(2,urlMessage.length);
        urlMessage = urlMessage.split("&");
        window.location.href = "organization.html?"+subid;
    }
    function loadHtmlContent(letter) {

        findOrganizationByLetter(letter, 1, function (result) {
            document.getElementById("line-spe-china").innerHTML = '';
            letterObject = result;
            var length = function () {
                var count = 0;
                for (var i in result) {
                    count++;
                }
                return count;
            };
            if (length() > 0) {
                var content = '';
                for (var i in result) {
                    var objArr = result[i];
                    if (objArr.length == 0) {
                        continue;
                    }
                    content += '<li><span>' + i + '</span>';
                    for (var j = 0; j < objArr.length; j++) {
                        var subObj = objArr[j];
                        content += '<a href="##' + subObj.id + '&' + i + '" onclick="organizationNameClickEvent(event, this,'+subObj.id+')">' + subObj.name + '</a>';
                    }
                    content += '</li>';
                }
                if (content.length > 0) {
                    document.getElementById("line-spe-china").innerHTML = content;
                }
            }
        });
    }
    loadHtmlContent(null);

</script>
</html>